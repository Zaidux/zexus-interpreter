# test_advanced.zx - CORRECTED SYNTAX
let numbers = [1, 2, 3, 4, 5]

# Lambda functions - WITH PARENTHESES
let total = numbers.reduce(lambda(x, y): x + y)
let doubled = numbers.map(lambda(x): x * 2)
let evens = numbers.filter(lambda(x): x % 2 == 0)

print "Total: " + string(total)
print "Doubled: " + string(doubled) 
print "Evens: " + string(evens)

# Export with security - CORRECTED SYNTAX
export calculate_total to "utils.zx" with "read_only"

action calculate_total():
    return numbers.reduce(lambda(x, y): x + y)

# Test the function
let result = calculate_total()
print "Exported function result: " + string(result)
