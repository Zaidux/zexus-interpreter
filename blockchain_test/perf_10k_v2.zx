// Performance Test: 10,000 transactions
// Using proven working contract format

CONTRACT SimpleToken {
    let balances = {}
    
    ACTION mint(to, amount) {
        let current = this.balances[to] || 0
        this.balances[to] = current + amount
        return {"success": true, "to": to, "amount": amount}
    }
    
    ACTION transfer(from, to, amount) {
        let from_balance = this.balances[from] || 0
        let to_balance = this.balances[to] || 0
        
        require(from_balance >= amount, "Insufficient balance")
        require(amount > 0, "Amount must be positive")
        
        this.balances[from] = from_balance - amount
        this.balances[to] = to_balance + amount
        
        return {"success": true}
    }
}

// Initialize
let token = SimpleToken()
token.mint("0xALICE", 100000000)

// Run test
let start = time()
let count = 0
let target = 10000

storage_begin_batch()

while (count < target) {
    token.transfer("0xALICE", "0xUSER_" + string(count), 10)
    count = count + 1
}

storage_commit_batch()

let end = time()
let duration = end - start
let tps = target / duration

print("Processed " + string(target) + " transactions")
print("Duration: " + string(duration) + " seconds")
print("TPS: " + string(tps))
