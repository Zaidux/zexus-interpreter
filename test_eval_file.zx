// Test eval_file() - Execute generated code

print("=== Test: Execute Generated Zexus Code ===");

// Generate Zexus code in block A
action blockA {
    log >> "dynamic.zx";
    print("action secret_multiply(x, y) {");
    print("    let result = x * y;");
    print("    print(\"Secret calculation: \" + result);");
    print("    return result;");
    print("}");
}

blockA();
print("Block A: Generated dynamic.zx\n");

// Execute the generated code in block B
print("Block B: Executing dynamic.zx");
let result = eval_file("dynamic.zx");
print("Execution complete\n");

// Generate Python code
print("=== Test: Generate and Execute Python ===");

action generatePython {
    log >> "script.py";
    print("# Python calculation");
    print("x = 15");
    print("y = 25");
    print("result = x + y");
    print("print(f'Python says: {result}')");
}

generatePython();
print("Generated script.py\n");

print("Executing Python script:");
eval_file("script.py", "python");

print("\n=== Test Complete ===");
