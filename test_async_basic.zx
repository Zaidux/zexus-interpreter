// test_async_basic.zx
// Basic async/await functionality test

print("=== Test 1: Simple Async Action ===");

// Define an async action that returns a value
async action fetchData() {
    print("  Fetching data...");
    return 42;
}

// Call async action (returns a Coroutine)
let coroutine = fetchData();
print("Coroutine created: " + coroutine.inspect());

// Await the coroutine
let result = await coroutine;
print("Result: " + string(result));
print("Coroutine after completion: " + coroutine.inspect());

print("\n=== Test 2: Async Action with Parameters ===");

async action calculate(x, y) {
    print("  Calculating: " + string(x) + " + " + string(y));
    return x + y;
}

let sum_coroutine = calculate(10, 20);
let sum = await sum_coroutine;
print("Sum: " + string(sum));

print("\n=== Test 3: Multiple Awaits ===");

async action getValue(n) {
    return n * 2;
}

let v1 = await getValue(5);
let v2 = await getValue(10);
let v3 = await getValue(15);

print("Values: " + string(v1) + " " + string(v2) + " " + string(v3));

print("\n=== All Tests Complete ===");
